<div class="container">

  <mat-card class="card-container mat-elevation-z4">
    <h2 class="title">Bid Versions for RFQ: {{ rfqId }}
      <div class="legend">
  <span class="legend-box lowest"></span> <span>Lowest Bid</span>
</div>

    </h2>

    <table mat-table [dataSource]="versionsData" class="styled-table">

      <!-- Vendor -->
      <ng-container matColumnDef="vendorName">
        <th mat-header-cell *matHeaderCellDef> Vendor </th>
        <td mat-cell *matCellDef="let row"> {{ row.vendorName }} </td>
      </ng-container>

      <!-- Version -->
      <ng-container matColumnDef="version">
        <th mat-header-cell *matHeaderCellDef> Version </th>
        <td mat-cell *matCellDef="let row"> {{ row.version }} </td>
      </ng-container>

      <!-- Offered -->
      <ng-container matColumnDef="offeredPrice">
        <th mat-header-cell *matHeaderCellDef> Offered </th>
        <td mat-cell *matCellDef="let row"> ₹{{ row.offeredPrice }} </td>
      </ng-container>

      <!-- Negotiated -->
      <ng-container matColumnDef="negotiatedPrice">
        <th mat-header-cell *matHeaderCellDef> Negotiated </th>
        <td mat-cell *matCellDef="let row"> ₹{{ row.negotiatedPrice }} </td>
      </ng-container>

      <!-- Discount -->
      <ng-container matColumnDef="discount">
        <th mat-header-cell *matHeaderCellDef> Disc % </th>
        <td mat-cell *matCellDef="let row"> {{ row.discount }}% </td>
      </ng-container>

      <!-- Freight -->
      <ng-container matColumnDef="freight">
        <th mat-header-cell *matHeaderCellDef> Freight </th>
        <td mat-cell *matCellDef="let row"> ₹{{ row.freight }} </td>
      </ng-container>

      <!-- Landed -->
      <ng-container matColumnDef="landedCost">
        <th mat-header-cell *matHeaderCellDef> Landed </th>
        <td mat-cell *matCellDef="let row"> ₹{{ row.landedCost }} </td>
      </ng-container>

      <!-- Last Updated -->
      <ng-container matColumnDef="modifiedAt">
        <th mat-header-cell *matHeaderCellDef> Updated </th>
        <td mat-cell *matCellDef="let row"> {{ row.modifiedAt | date:'short' }} </td>
      </ng-container>


        <ng-container matColumnDef="status">
        <th mat-header-cell *matHeaderCellDef> Status </th>
        <td mat-cell *matCellDef="let row"> {{ row.status }} </td>
      </ng-container>


      <!-- Actions -->
      <ng-container matColumnDef="actions">
        <th mat-header-cell *matHeaderCellDef class="action-col"> Actions </th>
        <td mat-cell *matCellDef="let row" class="action-buttons">

          <button mat-flat-button color="primary" class="btn-sm"
                  (click)="viewBidDetails(row.bidHeaderId)">
            View
          </button>

          <button mat-stroked-button color="accent" class="btn-sm"
                  *ngIf="rfq?.status === 'published'"
                  (click)="acceptBid(row)">
            Accept
          </button>

          <!-- <button mat-stroked-button color="warn" class="btn-sm"
                  *ngIf="rfq?.status === 'published'"
                  (click)="rejectBid(row)">
            Reject
          </button> -->

        </td>
      </ng-container>

      <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
    <tr mat-row 
      *matRowDef="let row; columns: displayedColumns;"
      [ngClass]="{ 'lowest-row': row.isLowest }">
  </tr>

    </table>

    <mat-paginator [length]="totalVersions"
                   [pageSize]="10"
                   [pageSizeOptions]="[5,10,20]">
    </mat-paginator>

  </mat-card>

</div>
